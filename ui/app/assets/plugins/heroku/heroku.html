<article class="heroku oneColumnAndMenu">
    <nav class="menu">
        <header>
            <h1>Deploy on Heroku</h1>
        </header>

        <div class="subhead">
            Instantly deploy this app on the cloud.
        </div>

        <div class="main" data-bind="visible: loggedIn">
            <span data-bind="visible: apps().length == 0">No Heroku app detected</span>
            <select data-bind="options: apps,
                       optionsText: 'name',
                       value: selectedApp,
                       optionsCaption: 'Your Heroku Apps...',
                       visible: apps().length > 0">
            </select>
            <button data-bind="click: createNewApp" class="plusbutton">+</button>
            <div data-bind="visible: selectedApp() != undefined, with: selectedApp">
                <a data-bind="attr: { href: web_url }" target="_blank" class="button">Open</a>
                <a data-bind="attr: { href: 'https://dashboard.heroku.com/apps/' + name }" target="_blank" class="button">Manage</a>
                <a href="#" data-bind="click: $parent.deploy" class="button">Deploy</a>
                <a href="#" data-bind="click: $parent.getLogs" class="button">Logs</a>
                <a href="#" data-bind="click: $parent.getConfigVars" class="button">Config Vars</a>
            </div>
        </div>
    </nav>
    <section>
        <header>
            <h1 data-bind="visible: !loggedIn() && state() != STATE_INIT">Login to Heroku (<a href="https://id.heroku.com/signup" target="_blank" style="text-decoration: underline">Sign Up for Free</a>)</h1>
            <h1 data-bind="visible: loggedIn() && state() != STATE_INIT">Logged Into Heroku (<a href="#" data-bind="click: logout" style="text-decoration: underline">Logout</a>)</h1>
        </header>
        <article class="page typo wrapper" data-bind="visible: state() == STATE_LOGIN">
            <span class="error" data-bind="text: errorMessage"></span>
            <form data-bind="submit: login">
                <label for="herokuEmail">Email:</label>
                <input id="herokuEmail" name="herokuEmail" data-bind="value: herokuEmail">
                <label for="herokuPassword">Password:</label>
                <input id="herokupassword" name="herokuPassword" type="password" data-bind="value: herokuPassword">
                <button type="submit">Login</button>
            </form>
        </article>
        <article class="page typo wrapper" data-bind="visible: state() == STATE_DEPLOY">
            <pre style="border: none"><code data-bind="text: deployLogs"></code></pre>
        </article>
        <article class="page typo wrapper" data-bind="visible: state() == STATE_LOGS">
            <pre style="border: none"><code data-bind="text: logs"></code></pre>
        </article>
        <article class="page typo wrapper" data-bind="visible: state() == STATE_CONFIG_VARS">
            <form class="config-vars" data-bind="submit: setConfigVars">
                <table>
                    <tbody data-bind="foreach: configVars">
                        <tr>
                            <td><input type="text" class="config-var-name" data-bind="value: name" disabled></td>
                            <td><input type="text" class="config-var-value" data-bind="value: value"></td>
                        </tr>
                    </tbody>
                    <tbody>
                        <tr>
                            <td><input class="config-var-name" name="newConfigVarName" placeholder="NEW_CONFIG_VAR" data-bind="value: newConfigName"></td>
                            <td class="config-var-value"><input class="config-var-value" name="newConfigVarValue" placeholder="VALUE" data-bind="value: newConfigValue"></td>
                        </tr>
                        <tr>
                            <td colspan="2"><button>Save</button></td>
                        </tr>
                    </tbody>
                </table>
            </form>
        </article>
    </section>
</article>